<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>History: <%= asin %></title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; font-size: 16px; }
        table { font-size: 16px; }
    </style>
</head>
<body class="bg-slate-100 p-8 font-sans">
    <div class="max-w-6xl mx-auto">
        <a href="/" class="inline-block mb-6 text-blue-600 font-bold hover:underline text-base">‚Üê Back to Dashboard</a>
        <h1 class="text-3xl font-black mb-2 text-slate-800">History for <a href="https://www.amazon.ca/dp/<%= asin %>" target="_blank" class="font-mono text-blue-600 hover:underline"><%= asin %></a></h1>
        <p class="text-slate-500 mb-8 font-mono text-base"><%= reports.length %> entries found</p>

        <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-slate-200">
            <table class="w-full text-left">
                <thead class="bg-slate-900 text-white text-sm uppercase font-bold">
                    <tr>
                        <th class="p-4 border-b border-slate-700">Date</th>
                        <th class="p-4 border-b border-slate-700">Status</th>
                        <th class="p-4 border-b border-slate-700">Stock Level</th>
                        <th class="p-4 border-b border-slate-700">Seller</th>
                        <th class="p-4 border-b border-slate-700">Price</th>
                        <th class="p-4 border-b border-slate-700">Rank</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-100 text-base">
                    <% reports.forEach(row => { %>
                        <tr class="hover:bg-slate-50 transition-colors">
                            <td class="p-4 font-mono text-slate-500">
                                <%= row.check_date_formatted || new Date(row.check_date).toLocaleString('en-US', { timeZone: 'America/Montreal' }) %>
                            </td>

                            <td class="p-4 font-bold <%= row.isStockChange ? 'text-red-600' : 'text-slate-700' %>">
                                <%= row.availability %>
                            </td>

                            <td class="p-4 <%= row.isStockChange ? 'text-red-600 font-bold' : 'text-slate-600' %>">
                                <%= row.stock_level %>
                            </td>

                            <td class="p-4 <%= row.isSellerChange ? 'text-red-600 font-bold' : 'text-slate-600' %>">
                                <%= row.seller %>
                            </td>

                            <td class="p-4 font-mono <%= row.isPriceChange ? 'bg-red-100 text-red-700 font-bold' : 'text-slate-800' %>">
                                <%= row.price %>
                            </td>

                            <td class="p-4 text-slate-500">
                                <%= row.ranking %>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
